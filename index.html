<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TripReady | ì—¬í–‰ ì¤€ë¹„ì˜ ëª¨ë“  ê²ƒ</title>
  <meta name="description" content="ì—¬í–‰ ì¤€ë¹„ë¥¼ ëŒ€ì‹  ì •ë¦¬í•´ë“œë¦½ë‹ˆë‹¤. ìƒí™©ì— ë§ì¶˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ì™€ íƒ€ì„ë¼ì¸." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #f0f4f8;           /* ë°°ê²½: ì•„ì£¼ ë°ì€ ì¿¨ê·¸ë ˆì´ */
      --card: #ffffff;         /* ì¹´ë“œ: í™”ì´íŠ¸ */
      --text: #1e293b;         /* ë³¸ë¬¸: ì§™ì€ ë„¤ì´ë¹„ ê·¸ë ˆì´ */
      --text-soft: #64748b;    /* ë³´ì¡°: ì¤‘ê°„ ê·¸ë ˆì´ */
      --line: #e2e8f0;         /* ë¼ì¸: ì—°í•œ ê·¸ë ˆì´ */
      --accent: #0ea5e9;       /* í¬ì¸íŠ¸: ìŠ¤ì¹´ì´ ë¸”ë£¨ */
      --accent-soft: #e0f2fe;  /* í¬ì¸íŠ¸ ë°°ê²½ */
      --input-bg: #f8fafc;     /* ì…ë ¥ì°½ ë°°ê²½ */
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.025);
    }

    *{box-sizing:border-box}
    body{margin:0;font-family:'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background:var(--bg); color:var(--text); line-height:1.6}
    .wrap{max-width:1020px;margin:0 auto;padding:60px 20px 100px}

    /* Header */
    .header{text-align:center;margin-bottom:40px}
    h1{margin:0 0 12px;font-size:32px;font-weight:800;letter-spacing:-0.5px;color:#0f172a;}
    .sub{color:var(--text-soft);font-size:16px; word-break: keep-all;}
    .pill{display:inline-block;margin-top:16px;padding:6px 14px;border:1px solid var(--line);border-radius:30px;font-size:12px;color:var(--text-soft);background:#fff; font-weight: 600;}

    /* Grid Layout */
    .grid{display:grid;gap:30px;grid-template-columns:1fr; align-items: start;}
    @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}

    /* Card Styles */
    .card{background:var(--card);border-radius:24px;padding:32px;box-shadow:var(--shadow-lg); border:1px solid rgba(255,255,255,0.5);}
    .card h2{margin:0 0 24px;font-size:20px;color:var(--text);display:flex;align-items:center;justify-content:space-between; font-weight: 700;}

    /* Inputs */
    label{display:block;color:var(--text);font-size:14px;margin-bottom:8px;font-weight:700}
    textarea,input,select{width:100%;background:var(--input-bg);border:1px solid var(--line);color:var(--text);border-radius:12px;padding:14px;font-size:15px;outline:none;transition:all 0.2s ease; font-family: inherit;}
    textarea::placeholder, input::placeholder {color: #94a3b8;}
    textarea:focus,input:focus,select:focus{border-color:var(--accent); box-shadow: 0 0 0 3px var(--accent-soft); background: #fff;}
    textarea{min-height:100px;resize:vertical}

    .row{display:flex;gap:12px; margin-bottom: 16px;}
    .row>*{flex:1}

    /* Chips */
    .chips{display:flex;flex-wrap:wrap;gap:8px; margin-bottom: 24px;}
    .chip{padding:10px 16px;border-radius:30px;border:1px solid var(--line);background:#fff;color:var(--text-soft);cursor:pointer;transition:all 0.2s;font-size:14px; font-weight: 600;}
    .chip:hover{background:var(--input-bg); border-color: #cbd5e1;}
    .chip[data-on="1"]{border-color:var(--accent);background:var(--accent);color:#fff;box-shadow: 0 4px 6px rgba(14, 165, 233, 0.25);}

    /* Buttons */
    .btn{width:100%;padding:16px;border-radius:14px;border:none;font-weight:700;font-size:16px;cursor:pointer;transition:all 0.2s;}
    .btnPrimary{background:var(--accent);color:#fff; box-shadow: 0 4px 6px rgba(14, 165, 233, 0.25);}
    .btnPrimary:hover{background:#0284c7; transform: translateY(-1px); box-shadow: 0 6px 8px rgba(14, 165, 233, 0.3);}
    .btnPrimary:disabled{background:var(--line);color:var(--text-soft);cursor:not-allowed; box-shadow: none; transform: none;}
    .btnGhost{background:transparent;border:2px solid var(--line);color:var(--text-soft);margin-top:12px; font-size: 14px; padding: 12px;}
    .btnGhost:hover{border-color:var(--text-soft);color:var(--text); background: var(--input-bg);}

    .actions {margin-top: 20px;}

    /* Results */
    .result-area{display:none}
    .block{background:var(--input-bg);border-radius:16px;padding:20px;margin-bottom:16px;border:1px solid var(--line);}
    .block h3{margin:0 0 12px;font-size:14px;color:var(--accent);text-transform:uppercase;letter-spacing:0.5px; font-weight: 800; display:flex; justify-content:space-between; align-items:center;}
    .block p, .block li{font-size:15px;color:var(--text);margin:0;line-height:1.6}
    .list{margin:0;padding-left:20px; list-style-type: disc;}
    .list li {margin-bottom: 6px; color: #334155;}

    /* Layouts within Result */
    .cols{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:600px){.cols{grid-template-columns:1fr 1fr}}

    /* Scores */
    .scoreRow{display:grid;grid-template-columns:repeat(2,1fr);gap:12px; margin-top: 24px;}
    @media(min-width:540px){.scoreRow{grid-template-columns:repeat(4,1fr)}}
    .scoreCard{background:#fff;padding:16px;border-radius:16px;text-align:center; border: 1px solid var(--line); box-shadow: var(--shadow);}
    .scoreLabel{font-size:12px;color:var(--text-soft);margin-bottom:6px; font-weight: 600;}
    .scoreVal{font-size:18px;font-weight:800;color:var(--accent); word-break: break-all;}

    /* Misc */
    .divider{height:1px;background:var(--line);margin:24px 0}
    .loader {width:20px;height:20px;border:3px solid rgba(255,255,255,0.3);border-bottom-color:#fff;border-radius:50%;display:inline-block;box-sizing:border-box;animation: rotation 1s linear infinite; vertical-align:middle; margin-right:8px; display:none;}
    @keyframes rotation {0% {transform: rotate(0deg)} 100% {transform: rotate(360deg)}}

    #statusBadge { background: var(--input-bg); padding: 4px 10px; border-radius: 20px; font-size: 12px; font-weight: 600; border: 1px solid var(--line);}

    .hidden{display:none !important}
  </style>
</head>
<body>

<div class="wrap">
  <div class="header">
    <h1>TripReady</h1>
    <div class="sub">ì„¤ë ˆëŠ” ì—¬í–‰, ë³µì¡í•œ ì¤€ë¹„ëŠ” <b>TripReady</b>ê°€ ëŒ€ì‹  ì •ë¦¬í•´ë“œë¦½ë‹ˆë‹¤.<br>ìƒí™©ì— ë”± ë§ëŠ” ì²´í¬ë¦¬ìŠ¤íŠ¸ì™€ í•  ì¼ì„ ë°›ì•„ë³´ì„¸ìš”.</div>
    <div class="pill">ë¬´ë£Œ MVP Â· ì €ì¥/ë¡œê·¸ì¸ ì—†ìŒ</div>
  </div>

  <div class="grid">
    <div class="card">
      <h2>âœˆï¸ ì—¬í–‰ ì •ë³´ ì…ë ¥</h2>

      <div class="row">
        <div>
          <label for="destination">1) ì—¬í–‰ì§€</label>
          <input id="destination" placeholder="ì˜ˆ) ì˜¤ì‚¬ì¹´, ì œì£¼ë„, ë‹¤ë‚­" />
        </div>
        <div>
          <label for="tripType">2) êµ¬ë¶„</label>
          <select id="tripType">
            <option value="êµ­ë‚´">êµ­ë‚´</option>
            <option value="í•´ì™¸">í•´ì™¸</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div>
          <label for="nights">3) ê¸°ê°„</label>
          <input id="nights" placeholder="ì˜ˆ) 3ë°•4ì¼" />
        </div>
        <div>
          <label for="startDate">4) ì¶œë°œì¼ (ì„ íƒ)</label>
          <input id="startDate" type="date" />
        </div>
      </div>

      <div class="row">
        <div>
          <label for="people">5) ì¸ì› (ì„ íƒ)</label>
          <input id="people" placeholder="ì˜ˆ) 2ëª…" />
        </div>
        <div>
          <label for="season">6) ê³„ì ˆ/ì‹œê¸° (ì„ íƒ)</label>
          <input id="season" placeholder="ì˜ˆ) 6ì›” ì¥ë§ˆì² , ì„±ìˆ˜ê¸°" />
        </div>
      </div>

      <div class="divider"></div>

      <label>7) êµí†µìˆ˜ë‹¨ (ì¤‘ë³µ ì„ íƒ ê°€ëŠ¥)</label>
      <div class="chips" id="transportChips">
        <div class="chip" data-value="ë¹„í–‰ê¸°">ë¹„í–‰ê¸°</div>
        <div class="chip" data-value="ê¸°ì°¨">ê¸°ì°¨</div>
        <div class="chip" data-value="ìì°¨">ìì°¨</div>
        <div class="chip" data-value="ë ŒíŠ¸ì¹´">ë ŒíŠ¸ì¹´</div>
        <div class="chip" data-value="ë²„ìŠ¤/ê¸°íƒ€">ë²„ìŠ¤/ê¸°íƒ€</div>
      </div>

      <label for="notes">8) íŠ¹ë³„ ìƒí™© / ë©”ëª¨</label>
      <textarea id="notes" placeholder="ì˜ˆ) ì•„ì´ ë™ë°˜, ë¶€ëª¨ë‹˜ í™˜ê°‘ ì—¬í–‰, ë¹„ê±´ ì‹ë‹¨ í•„ìš”, ì§ ë§ìŒ, ìƒˆë²½ ë¹„í–‰ê¸° ë“±..."></textarea>

      <div class="actions">
        <button class="btn btnPrimary" id="build">
           <span class="loader" id="loader"></span>
           <span id="btnText">ì¤€ë¹„ ì„¤ê³„í•˜ê¸°</span>
        </button>
        <button class="btn btnGhost" id="sample">ì˜ˆì‹œ ë°ì´í„° ì±„ìš°ê¸°</button>
      </div>
    </div>

    <div class="card" id="resultCardBox">
      <h2>ğŸ“‹ ì„¤ê³„ ë¦¬í¬íŠ¸ <span id="statusBadge" style="color:var(--text-soft)">ëŒ€ê¸° ì¤‘</span></h2>

      <div id="idleState" style="text-align:center; padding:60px 0; color:var(--text-soft)">
        <img src="https://cdn-icons-png.flaticon.com/512/201/201623.png" width="64" style="opacity:0.2; margin-bottom: 20px;">
        <p style="font-size: 16px; margin: 0;">ì—¬í–‰ ì •ë³´ë¥¼ ì…ë ¥í•˜ê³ <br><b>[ì¤€ë¹„ ì„¤ê³„í•˜ê¸°]</b>ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
      </div>

      <div class="result-area" id="resultArea">
        <div class="block" style="background:#f0f9ff; border-color:#bae6fd;">
          <h3 style="color:#0284c7;">ğŸ’¡ í•œ ì¤„ ìš”ì•½</h3>
          <p id="resSummary" style="color:#0c4a6e; font-weight:500;"></p>
        </div>

        <div class="cols">
          <div class="block">
            <h3>ğŸ“… í•  ì¼ íƒ€ì„ë¼ì¸</h3>
            <div id="resTimeline"></div>
          </div>

          <div class="block" style="border-color:#fecaca; background:#fff5f5;">
            <h3 style="color:#dc2626;">âš ï¸ ë†“ì¹˜ê¸° ì‰¬ìš´ ê²ƒ</h3>
            <div id="resMisses"></div>
          </div>
        </div>

        <div class="block">
          <h3>âœ… ì¤€ë¹„ë¬¼ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
          <div id="resChecklist"></div>
        </div>

        <div class="divider"></div>

        <div class="scoreRow">
          <div class="scoreCard"><div class="scoreLabel">ì¤€ë¹„ ë‚œì´ë„</div><div class="scoreVal" id="scComplex">-</div></div>
          <div class="scoreCard"><div class="scoreLabel">ë¦¬ìŠ¤í¬ ì£¼ì˜</div><div class="scoreVal" id="scRisk">-</div></div>
          <div class="scoreCard"><div class="scoreLabel">ë¹ ëœ¨ë¦¼ ì£¼ì˜</div><div class="scoreVal" id="scForget">-</div></div>
          <div class="scoreCard"><div class="scoreLabel">ì‹œì‘ ì¶”ì²œ</div><div class="scoreVal" id="scStart">-</div></div>
        </div>

        <div class="actions" style="margin-top:24px;">
          <button class="btn btnGhost hidden" id="copyText">ğŸ“ í…ìŠ¤íŠ¸ë¡œ ì „ì²´ ë³µì‚¬</button>
          <button class="btn btnGhost hidden" id="reset" style="border-color:#fee2e2; color:#ef4444;">ì´ˆê¸°í™”</button>
        </div>

        <div style="margin-top:20px; font-size:12px; color:var(--text-soft); text-align:center;">
            * ë³¸ ê²°ê³¼ëŠ” AI ì„¤ê³„ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•˜ë©°, í•­ê³µì‚¬/êµ­ê°€ë³„ ìµœì‹  ê·œì •ì€ ë°˜ë“œì‹œ ì¬í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.
        </div>
      </div>
    </div>
  </div>
</div>

<script>
(() => {
  const $ = (id) => document.getElementById(id);

  const state = {
    transports: new Set(),
    lastJson: null,
    lastText: null
  };

  // ì¹© ì„ íƒ ë¡œì§
  const chips = Array.from(document.querySelectorAll('#transportChips .chip'));
  chips.forEach(ch => {
    ch.addEventListener('click', () => {
      const v = ch.dataset.value;
      if (state.transports.has(v)) {
        state.transports.delete(v);
        ch.dataset.on = "0";
      } else {
        state.transports.add(v);
        ch.dataset.on = "1";
      }
    });
  });

  // ìƒ˜í”Œ ì±„ìš°ê¸°
  $('sample').addEventListener('click', () => {
    $('destination').value = "ì˜¤ì‚¬ì¹´";
    $('tripType').value = "í•´ì™¸";
    $('nights').value = "3ë°•4ì¼";
    $('people').value = "2ëª…";
    $('season').value = "6ì›”(ì¥ë§ˆì² )";
    $('notes').value = "ì»¤í”Œ ì—¬í–‰, ìƒˆë²½ ë¹„í–‰ê¸°ë¼ í”¼ê³¤í•  ë“¯, ìœ ì‹¬/ì´ì‹¬ í•„ìš”. ë§ì´ ê±¸ì„ ì˜ˆì •.";

    // chips update
    state.transports = new Set(["ë¹„í–‰ê¸°", "ë²„ìŠ¤/ê¸°íƒ€"]);
    chips.forEach(x => x.dataset.on = state.transports.has(x.dataset.value) ? "1" : "0");

    // ìŠ¤í¬ë¡¤ ì´ë™
    $('build').scrollIntoView({behavior: "smooth", block: "center"});
  });

  // ì´ˆê¸°í™”
  $('reset').addEventListener('click', () => {
    $('destination').value = "";
    $('tripType').value = "êµ­ë‚´";
    $('nights').value = "";
    $('startDate').value = "";
    $('people').value = "";
    $('season').value = "";
    $('notes').value = "";
    state.transports = new Set();
    chips.forEach(x => x.dataset.on = "0");
    state.lastJson = null;
    state.lastText = null;

    $('resultArea').classList.add('hidden');
    $('idleState').style.display = 'block';
    $('statusBadge').innerText = "ëŒ€ê¸° ì¤‘";
    $('statusBadge').style.color = "var(--text-soft)";
    $('statusBadge').style.background = "var(--input-bg)";

    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  // í…ìŠ¤íŠ¸ ë³µì‚¬
  $('copyText').addEventListener('click', async () => {
    if (!state.lastText) return;
    await navigator.clipboard.writeText(state.lastText);
    const originBtnText = $('copyText').innerText;
    $('copyText').innerText = "âœ… ë³µì‚¬ ì™„ë£Œ!";
    setTimeout(() => $('copyText').innerText = originBtnText, 2000);
  });

  function escapeHtml(s){
    return String(s ?? "")
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  function list(items, color){
    if (!items || !items.length) return `<p class="tiny" style="color:#94a3b8">-</p>`;
    const style = color ? `style="color:${color}"` : "";
    return `<ul class="list" ${style}>${items.map(x => `<li>${escapeHtml(x)}</li>`).join("")}</ul>`;
  }

  // í…ìŠ¤íŠ¸ ë¹Œë”
  function buildCopyText(data){
    const lines = [];
    lines.push(`[TripReady] ì—¬í–‰ ì¤€ë¹„ ì„¤ê³„ ë¦¬í¬íŠ¸`);
    lines.push(`ğŸ“ ì—¬í–‰ì§€: ${data.trip?.destination} (${data.trip?.trip_type})`);
    lines.push(`ğŸ—“ ê¸°ê°„: ${data.trip?.duration}`);
    lines.push(`ğŸ’¡ ìš”ì•½: ${data.summary}`);
    lines.push("");
    lines.push(`â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`);
    lines.push(`ğŸ“… [í•  ì¼ íƒ€ì„ë¼ì¸]`);
    const tl = data.timeline || {};
    Object.keys(tl).forEach(k => {
      lines.push(`\n[${k}]`);
      (tl[k] || []).forEach(it => lines.push(`â€¢ ${it}`));
    });
    lines.push("");
    lines.push(`â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`);
    lines.push(`âœ… [ì¤€ë¹„ë¬¼ ì²´í¬ë¦¬ìŠ¤íŠ¸]`);
    const cl = data.checklist || {};
    Object.keys(cl).forEach(cat => {
      lines.push(`\n[${cat}]`);
      (cl[cat] || []).forEach(it => lines.push(`â€¢ ${it}`));
    });
    lines.push("");
    lines.push(`âš ï¸ [ë†“ì¹˜ê¸° ì‰¬ìš´ ê²ƒ]`);
    (data.common_misses || []).forEach(it => lines.push(`â€¢ ${it}`));
    lines.push("");
    lines.push(`(ë³¸ ë‚´ìš©ì€ ì°¸ê³ ìš©ì´ë©°, ìµœì¢… í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤)`);
    return lines.join("\n");
  }

  // ë Œë”ë§
  function renderResult(data){
    state.lastText = buildCopyText(data);

    $('idleState').style.display = 'none';
    $('resultArea').classList.remove('hidden');
    $('resultArea').style.display = 'block';

    $('statusBadge').innerText = "ì„¤ê³„ ì™„ë£Œ";
    $('statusBadge').style.color = "#16a34a"; // green
    $('statusBadge').style.background = "#dcfce7";

    // Summary
    $('resSummary').innerText = data.summary;

    // Timeline
    const tl = data.timeline || {};
    if (Object.keys(tl).length) {
      $('resTimeline').innerHTML = Object.keys(tl).map(k => `
        <div style="margin-top:12px">
          <div style="font-size:13px; color:var(--accent); font-weight:700; margin-bottom:6px;">${escapeHtml(k)}</div>
          ${list(tl[k])}
        </div>
      `).join("");
    } else {
      $('resTimeline').innerHTML = `<p style="font-size:14px; color:var(--text-soft)">íƒ€ì„ë¼ì¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>`;
    }

    // Misses
    $('resMisses').innerHTML = list(data.common_misses || [], "#b91c1c");

    // Checklist
    const cl = data.checklist || {};
    if (Object.keys(cl).length) {
      $('resChecklist').innerHTML = Object.keys(cl).map(cat => `
        <div style="margin-top:14px">
          <div style="font-size:13px; color:#475569; font-weight:700; margin-bottom:6px; background:#f1f5f9; display:inline-block; padding:2px 8px; border-radius:4px;">${escapeHtml(cat)}</div>
          ${list(cl[cat])}
        </div>
      `).join("");
    } else {
      $('resChecklist').innerHTML = `<p style="font-size:14px; color:var(--text-soft)">ì²´í¬ë¦¬ìŠ¤íŠ¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>`;
    }

    // Scores
    $('scComplex').innerText = (data.scores?.prep_complexity ?? "-") + " / 10";
    $('scRisk').innerText = (data.scores?.risk_level ?? "-") + " / 10";
    $('scForget').innerText = (data.scores?.forget_risk ?? "-") + " / 10";
    $('scStart').innerText = data.scores?.start_now ?? "-";

    // Buttons
    $('copyText').classList.remove('hidden');
    $('reset').classList.remove('hidden');

    // Scroll logic for mobile
    if(window.innerWidth < 900) {
        $('resultCardBox').scrollIntoView({behavior: "smooth", block: "start"});
    }
  }

  // API í˜¸ì¶œ
  $('build').addEventListener('click', async () => {
    const destination = $('destination').value.trim();
    const tripType = $('tripType').value;
    const duration = $('nights').value.trim();
    const startDate = $('startDate').value;
    const people = $('people').value.trim();
    const season = $('season').value.trim();
    const notes = $('notes').value.trim();
    const transport = Array.from(state.transports);

    if (!destination || !duration) {
      alert("ğŸ’¡ ì—¬í–‰ì§€ì™€ ê¸°ê°„ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤!");
      return;
    }

    // Loading UX
    const btn = $('build');
    const loader = $('loader');
    const btnText = $('btnText');

    btn.disabled = true;
    loader.style.display = 'inline-block';
    btnText.innerText = "ì—¬í–‰ ì¤€ë¹„ ì„¤ê³„ ì¤‘...";
    $('statusBadge').innerText = "ë¶„ì„ ì¤‘...";
    $('statusBadge').style.color = "var(--accent)";
    $('statusBadge').style.background = "var(--accent-soft)";

    if(window.innerWidth < 900) {
        $('resultCardBox').scrollIntoView({behavior: "smooth", block: "start"});
    }

    try {
      const res = await fetch("/api/analyze", {
        method: "POST",
        headers: { "Content-Type":"application/json" },
        body: JSON.stringify({
          destination, tripType, duration, startDate, people, season, transport, notes
        })
      });

      if (!res.ok) throw new Error("ì„œë²„ í†µì‹  ì˜¤ë¥˜");
      const data = await res.json();

      // JSON íŒŒì‹± ì‹¤íŒ¨ ë°©ì–´
      if(data.error) throw new Error(data.error);

      renderResult(data);

    } catch (err) {
      console.error(err);
      alert("ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + err.message);
      $('statusBadge').innerText = "ì˜¤ë¥˜ ë°œìƒ";
      $('statusBadge').style.color = "#dc2626";
    } finally {
      btn.disabled = false;
      loader.style.display = 'none';
      btnText.innerText = "ì¤€ë¹„ ì„¤ê³„í•˜ê¸°";
    }
  });

})();</script></body></html>
